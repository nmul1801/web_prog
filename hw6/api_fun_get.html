
<!doctype html>
<html>
<head>
    
	<title>EMOJI</title>
	<meta charset="utf-8"/>
    <style>
        #pg-content {width: 50vw; margin: auto; text-align: center;}
        #content {font-size: 200px;}
    </style>
	<script>
		function loadMessages() {
			/* Step 1: Make instance of XHR object... */
			request = new XMLHttpRequest();
			console.log("1: created request");
 
		// Step 2: Open the JSON file at remote location
 
			request.open("GET", "https://emojihub.yurace.pro/api/random", true);

			console.log("2: open success");
 	
			// Step 3: set up callback for when HTTP response is returned (i.e., you get the JSON file back)

			request.onreadystatechange = function() {
				console.log("3:  event fired");
 
				if (request.readyState == 4 && request.status == 200) {

					// Step 5: when we get all the JSON data back, parse it and use it
					console.log("5:  data is ready");
					theData = request.responseText;
					returnHTML = theData;
					data = JSON.parse(theData);
					document.getElementById("content").innerHTML = data["htmlCode"][0];
				}
				else if (request.readyState == 4 && request.status != 200) {
					document.getElementById("content").innerHTML = "Whoops, something went terribly wrong!";
				}

				else if (request.readyState == 3) {
					console.log("6:  ready state 3- request received,data being sent");
					document.getElementById("content").innerHTML = "Come back soon!";
				}

			}//end on readystate change	
		// Step 4: fire off the HTTP request
			request.send();
			console.log("4 request sent");
		}
	</script>
</head>


<body onload="loadMessages()">
    <div id="pg-content">
        <h1>Random Emoji Maker With Get</h1>
        <div id="content"></div>
        <button onclick="loadMessages()">New Emoji</button>
    </div>
</body>
</html>